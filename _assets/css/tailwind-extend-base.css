@layer base {
  /* reset
   * This reset is influenced by https://www.joshwcomeau.com/css/custom-css-reset/
   */

  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
  }

  html {
    height: 100%;
    scroll-behavior: smooth;
    /*https://kilianvalkhof.com/2022/css-html/your-css-reset-needs-text-size-adjust-probably/*/
    -moz-text-size-adjust: none;
    -webkit-text-size-adjust: none;
    text-size-adjust: none;
  }

  @media (prefers-reduced-motion) {
    html {
      scroll-behavior: auto;
    }
  }

  body {
    min-height: 100%;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
  }

  img,
  picture,
  svg {
    height: auto;
    max-width: 100%;
  }

  iframe,
  canvas {
    max-width: 100%;
  }

  input,
  button,
  textarea,
  select {
    font: inherit;
  }

  p,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    overflow-wrap: break-word;
  }

  /* font-size*/
  html {
    @apply text-base;
  }

  /* base colors */
  body {
    @apply text-stone-900;
  }

  /* focus */
  *:focus {
    outline: 4px solid theme(colors.outline);
    outline-offset: 2px;
  }

  ::selection {
    @apply bg-primary-light text-current;
  }

  /* links */
  a {
    @apply underline;
  }
  a:hover,
  a:focus,
  a:active {
    @apply text-link;
  }

  /* headings */
  h1,
  .h1 {
    @apply font-display font-bold max-sm:text-2xl text-3xl mt-ryt-2xl mb-ryt-xl tracking-tight;
  }
  h2,
  .h2 {
    @apply font-display font-bold max-sm:text-xl text-2xl mt-ryt-xl mb-ryt-lg tracking-tight;
  }
  h3,
  .h3 {
    @apply font-display font-bold max-sm:text-lg text-xl mt-ryt-xl mb-ryt-lg tracking-tight;
  }
  h4,
  .h4 {
    @apply font-display font-bold max-sm:text-base text-lg mt-ryt-lg mb-ryt;
  }
  h5,
  h6,
  .h5,
  .h6 {
    @apply font-display font-bold text-base mt-ryt-lg mb-ryt;
  }

  /* typography */
  cite {
    @apply font-bold not-italic;
  }

  /* dl */

  dl {
    @apply my-ryt mx-0 p-0;
  }

  dt {
    @apply font-bold;
  }

  dd {
    @apply m-0;
  }

  dd + dt,
  dt + dt {
    @apply mt-ryt;
  }

  /* ul, ol */
  ol,
  ul {
    @apply list-none p-0 mx-0 my-ryt;
  }

  li > ol,
  li > ul {
    @apply my-0;
  }

  li {
    @apply m-0 p-0 pl-ryt-lg;
  }

  li > p:first-child {
    @apply inline;
  }

  li > ol {
    counter-reset: ol-counter;
  }

  ol > li {
    counter-increment: ol-counter;
  }

  ol > li::before {
    content: counters(ol-counter, ".", decimal) ". ";
    font-size: smaller;
    @apply font-bold -ml-ryt-lg min-w-ryt-lg inline-flex content-baseline justify-start tabular-nums whitespace-nowrap;
  }

  ol > li > ol > li::before {
    content: counters(ol-counter, ".", decimal) " ";
  }

  ul > li::before {
    content: "●" " ";
    @apply -ml-ryt-lg min-w-ryt-lg inline-flex content-baseline justify-start whitespace-nowrap;
  }

  ul.reset,
  ol.reset {
    @apply list-none my-0 p-0;
    > li {
      @apply p-0;
    }
    > li::before {
      content: "";
      @apply hidden;
    }
  }

  /*vertical rhythm*/
  table,
  figure,
  pre,
  blockquote {
    @apply my-ryt-xl;
  }
  img + img {
    @apply my-ryt-lg;
  }
  p + p {
    @apply my-ryt;
  }

  img {
    @apply object-contain object-left;
    max-height: 80vh;
  }
  /* table */
  table {
    @apply text-sm border-collapse border-y-2 border-y-current;

    caption {
      @apply text-left text-sm py-ryt-sm border-t-2 border-t-current;
    }

    th {
      @apply text-left font-bold py-ryt-sm pr-ryt-sm align-top leading-5;
    }
    td {
      @apply text-left font-normal py-ryt-sm pr-ryt-sm align-top leading-5;
    }
    thead {
      th,
      td {
        @apply align-bottom;
      }
    }
    th + th,
    td + td {
      @apply pl-ryt-sm;
    }
  }

  /* figure */
  figure {
    figcaption {
      @apply text-sm my-ryt-sm;
    }
  }

  /* quote and blockquote */

  q {
    @apply italic;
  }

  blockquote {
    @apply p-0 italic font-bold legible-ch-width border-l-2 border-l-current pl-[calc(theme(space.ryt-lg)-theme(borderWidth.2))];
  }

  blockquote > header,
  blockquote > footer {
    @apply font-normal font-sans text-base not-italic my-ryt-sm;
  }

  /* address */
  address {
    @apply my-ryt not-italic font-normal;
  }

  /* kbd */
  kbd {
    @apply font-mono bg-light text-center text-sm px-ryt-xs inline-block border-[1px] border-current rounded-sm;
  }

  /* pre and pre code */
  pre {
    @apply text-sm font-mono whitespace-pre-wrap;
    > * {
      @apply overflow-x-auto;
    }
  }

  pre[data-language]::before {
    content: attr(data-language);
    @apply font-sans text-sm my-ryt-sm;
  }

  code:not(pre code) {
    @apply bg-light px-ryt-2xs font-mono;
  }

  pre code {
    @apply bg-stone-800 text-stone-100 px-ryt py-ryt-sm -mx-ryt block text-left leading-5 whitespace-pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }
}
